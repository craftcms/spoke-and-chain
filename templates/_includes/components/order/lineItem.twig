<!-- Template: {{ _self }}.twig -->
{# Params #}
{% set lineItem = lineItem is not defined ? null : lineItem %}
{% set purchasable = lineItem ? lineItem.getPurchasable() : null %}
{% set form = form is not defined ? false : form %}
{% set isCompleted = isCompleted is not defined ? true : isCompleted %}
{% set mainImage = not isCompleted and purchasable and purchasable.product ? purchasable.product.mainImage.one() : null %}

{% if lineItem %}
    <div class="flex flex-wrap items-center border-b border-gray-300 py-8">
    {# Image #}
    <div class="w-full md:w-1/3 lg:w-1/5 md:pr-6">
      {% if purchasable %}
        <a class="block" href="{{ purchasable.product.url }}">
      {% endif %}
          <div class="aspect-ratio-product-card">
            <div class="aspect-inner overflow-hidden relative">
              {% if mainImage %}
                <img class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full" src="{{ mainImage.url }}" alt="{{ mainImage.title }}">
              {% else %}
                {% include '_includes/components/order/snapshotImage' with { lineItem: lineItem } %}
              {% endif %}
            </div>
          </div>
      {% if purchasable %}
        </a>
      {% endif %}
    </div>

    <div class="flex flex-wrap items-center w-full md:w-2/3 lg:w-4/5">
      {# Product #}
      <div class="w-full lg:w-1/2 md:pr-6">
        {% if purchasable %}
          <a class="font-bold text-xl text-black" class="block" href="{{ purchasable.product.url }}">
        {% else %}
          <div class="font-bold text-xl text-black">
        {% endif %}
            {{ lineItem.description }}
        {% if purchasable %}
          </a>
        {% else %}
          </div>
        {% endif %}
        <div>{{ lineItem.sku }}</div>
      </div>

      {# Quantity #}
      <div class="w-1/2 lg:w-1/4 md:pr-6">
        {% if form %}
          <label for="qty">{{ 'Quantity'|t }}</label>
          <input id="qty" name="lineItems[{{ lineItem.id }}][qty]" type="text" value="{{ lineItem.qty }}">
        {% else %}
          {{ 'Quantity'|t }}: {{ lineItem.qty }}
        {% endif %}
      </div>

      {# Price #}
      <div class="w-1/2 lg:w-1/4 text-right">
        {{ lineItem.subtotalAsCurrency }}
      </div>
    </div>
  </div>
{% endif %}
