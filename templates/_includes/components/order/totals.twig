{% set order = order is not defined ? null : order %}
{% set form = form is not defined ? false : form %}

{% if order %}
  <!-- Template: {{ _self }}.twig -->
  <div class="pb-3">
    <div class="flex items-center w-full justify-between pb-1">
      <div>{{ 'Shipping'|t }}</div>
      <div class="text-right">{{ order.totalShippingCostAsCurrency }}</div>
    </div>
    <div class="flex items-center w-full justify-between pb-1">
      <div>{{ 'Tax'|t }}</div>
      <div class="text-right">{{ order.totalTaxAsCurrency }}</div>
    </div>
    {% if form or order.couponCode %}
      <div class="flex items-center w-full justify-between pb-1">
        <div>{{ 'Coupon'|t }}</div>
        <div x-data="{ show: {{ form ? 'false' : 'true' }} }">
          {% if not order.couponCode and form %}
            <template x-if="!show">
              <a href="#" x-on:click.prevent="show=true;">{{ 'Enter coupon'|t }}</a>
            </template>
          {% elseif order.couponCode and form %}
            <template x-if="show==false">
              <div class="text-right">{{ order.couponCode }} <a href="#" x-on:click.prevent="show=true;">{{ 'edit'|t }}</a></div>
            </template>
          {% else %}
            <div class="text-right">{{ order.couponCode }}</div>
          {% endif %}
          {% if form %}
            <template x-if="show">
              <div class="flex items-center">
                <input type="submit" class="button button--small" name="apply" value="{{ 'Apply'|t }}">
                <div class="pl-2">
                  <input type="text" name="couponCode" value="{{ order.couponCode }}">
                </div>
              </div>
            </template>
          {% endif %}
        </div>
      </div>
    {% endif %}
    {% if order.totalDiscount != 0 %}
      <div class="flex items-center w-full justify-between pb-1">
        <div>{{ 'Discount'|t }}</div>
        <div class="text-right">{{ order.totalDiscountAsCurrency }}</div>
      </div>
    {% endif %}
  </div>
  <div class="flex items-center w-full justify-between py-4 border-t border-b border-gray-300">
    <div class="font-bold">Total</div>
    <div class="text-right">{{ order.totalPriceAsCurrency }}</div>
  </div>
{% endif %}
