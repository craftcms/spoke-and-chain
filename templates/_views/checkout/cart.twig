{# Layout #}
{% extends '_layouts/site' %}

{# Variables #}
{% set checkoutPage = craft.entries({ section: 'checkout', type: 'checkout' }).one() %}

{# Blocks #}
{% block content %}
  <!-- Template: {{ _self }}.twig -->

  {# Heading #}
  <div class="container py-4 text-center">
    <h1>{{ entry.heading }}</h1>
    <h2>{{ entry.subheading }}</h2>
  </div>

  {# Cart #}
  <div class="container flex justify-center">
    <div class="border-t border-gray-300 w-full max-w-5xl">
      {% if not cart.lineItems|length %}
        {{ entry.body }}
      {% else %}
        <form method="post">
          {{ csrfInput() }}
          {{ actionInput('commerce/cart/update-cart') }}

          {% for lineItem in cart.lineItems %}
            {% include '_includes/components/order/line-item' with { lineItem: lineItem } only %}
          {% endfor %}

          <div class="flex justify-end">
            <div class="w-full xl:w-4/5">
              <div class="flex items-center w-full justify-between">
                <div>Shipping</div>
                <div class="text-right">{{ cart.totalShippingCostAsCurrency }}</div>
              </div>
              <div class="flex items-center w-full justify-between">
                <div>Tax</div>
                <div class="text-right">{{ cart.totalTaxAsCurrency }}</div>
              </div>
              <div class="flex items-center w-full justify-between">
                <div>Discount</div>
                <div class="text-right">{{ cart.totalDiscountAsCurrency }}</div>
              </div>
              <div class="flex items-center w-full justify-between py-4 border-t border-b border-gray-300">
                <div class="font-bold">Total</div>
                <div class="text-right">{{ cart.totalPriceAsCurrency }}</div>
              </div>

              <div class="pt-4">
                <input class="button" type="submit" name="submit" value="{{ 'Update cart'|t }}">
                {% if checkoutPage %}
                  <a class="button" href="{{ checkoutPage.url }}">{{ 'Checkout'|t }}</a>
                {% endif %}
              </div>
            </div>
          </div>
        </form>
      {% endif %}
    </div>
  </div>
{% endblock %}