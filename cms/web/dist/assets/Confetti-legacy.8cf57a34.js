System.register(["./vendor-legacy.a3ea0db9.js"],(function(t){"use strict";var e,i;return{setters:[function(t){e=t.d,i=t.e}],execute:function(){var s=(t=1,e=t+1,i=!1)=>{const s=parseFloat(t),a=parseFloat(e),n=Math.random()*(a-s)+s;return i?Math.round(n):n};class a{constructor({color:t="blue",size:e=10,dropRate:i=10}={}){this.color=t,this.size=e,this.dropRate=i}setup({canvas:t,wind:e,windPosCoef:i,windSpeedMax:a,count:n}){return this.canvas=t,this.wind=e,this.windPosCoef=i,this.windSpeedMax=a,this.x=s(-35,this.canvas.width+35),this.y=s(-30,-35),this.d=s(150)+10,this.particleSize=s(this.size,2*this.size),this.tilt=s(10),this.tiltAngleIncremental=(s(0,.08)+.04)*(s()<.5?-1:1),this.tiltAngle=0,this.angle=s(2*Math.PI),this.count=n+1,this.remove=!1,this}update(){this.tiltAngle+=this.tiltAngleIncremental*(.2*Math.cos(this.wind+(this.d+this.x+this.y)*this.windPosCoef)+1),this.y+=(Math.cos(this.angle+this.d)+parseInt(this.dropRate,10))/2,this.x+=(Math.sin(this.angle)+Math.cos(this.wind+(this.d+this.x+this.y)*this.windPosCoef))*this.windSpeedMax,this.y+=Math.sin(this.wind+(this.d+this.x+this.y)*this.windPosCoef)*this.windSpeedMax,this.tilt=15*Math.sin(this.tiltAngle-this.count/3)}pastBottom(){return this.y>this.canvas.height}draw(){this.canvas.ctx.fillStyle=this.color,this.canvas.ctx.beginPath(),this.canvas.ctx.setTransform(Math.cos(this.tiltAngle),Math.sin(this.tiltAngle),0,1,this.x,this.y)}kill(){this.remove=!0}}class n extends a{draw(){super.draw(),this.canvas.ctx.arc(0,0,this.particleSize/2,0,2*Math.PI,!1),this.canvas.ctx.fill()}}class h extends a{draw(){super.draw(),this.canvas.ctx.fillRect(0,0,this.particleSize,this.particleSize/2)}}class r extends a{draw(){super.draw();const t=(t,e,i,s,a,n)=>{this.canvas.ctx.bezierCurveTo(t*(this.particleSize/200),e*(this.particleSize/200),i*(this.particleSize/200),s*(this.particleSize/200),a*(this.particleSize/200),n*(this.particleSize/200))};this.canvas.ctx.moveTo(37.5/this.particleSize,20/this.particleSize),t(75,37,70,25,50,25),t(20,25,20,62.5,20,62.5),t(20,80,40,102,75,120),t(110,102,130,80,130,62.5),t(130,62.5,130,25,100,25),t(85,25,75,37,75,40),this.canvas.ctx.fill()}}class l extends a{constructor(t,e){super(t),this.imgEl=e}draw(){super.draw(),this.canvas.ctx.drawImage(this.imgEl,0,0,this.particleSize,this.particleSize)}}class o{constructor(){this.cachedImages={}}createImageElement(t){const e=document.createElement("img");return e.setAttribute("src",t),e}getImageElement(t){return this.cachedImages[t]||(this.cachedImages[t]=this.createImageElement(t)),this.cachedImages[t]}getRandomParticle(t={}){const e=t.particles||[];return e.length<1?{}:e[Math.floor(Math.random()*e.length)]}getDefaults(t={}){return{type:t.defaultType||"circle",size:t.defaultSize||10,dropRate:t.defaultDropRate||10,colors:t.defaultColors||["DodgerBlue","OliveDrab","Gold","pink","SlateBlue","lightblue","Violet","PaleGreen","SteelBlue","SandyBrown","Chocolate","Crimson"],url:null}}create(t){const e=this.getDefaults(t),i=this.getRandomParticle(t),a=Object.assign(e,i),o=s(0,a.colors.length-1,!0);if(a.color=a.colors[o],"circle"===a.type)return new n(a);if("rect"===a.type)return new h(a);if("heart"===a.type)return new r(a);if("image"===a.type)return new l(a,this.getImageElement(a.url));throw Error(`Unknown particle type: "${a.type}"`)}}class c{constructor(t){this.items=[],this.pool=[],this.particleOptions=t,this.particleFactory=new o}update(){const t=[],e=[];this.items.forEach((i=>{i.update(),i.pastBottom()?i.remove||(i.setup(this.particleOptions),t.push(i)):e.push(i)})),this.pool.push(...t),this.items=e}draw(){this.items.forEach((t=>t.draw()))}add(){this.pool.length>0?this.items.push(this.pool.pop().setup(this.particleOptions)):this.items.push(this.particleFactory.create(this.particleOptions).setup(this.particleOptions))}refresh(){this.items.forEach((t=>{t.kill()})),this.pool=[]}}class d{constructor(t){if(t&&!(t instanceof HTMLCanvasElement))throw new Error("Element is not a valid HTMLCanvasElement");this.isDefault=!t,this.canvas=t||d.createDefaultCanvas("confetti-canvas"),this.ctx=this.canvas.getContext("2d")}static createDefaultCanvas(t){const e=document.createElement("canvas");return e.style.display="block",e.style.position="fixed",e.style.pointerEvents="none",e.style.top=0,e.style.width="100vw",e.style.height="100vh",e.id=t,document.querySelector("body").appendChild(e),e}get width(){return this.canvas.width}get height(){return this.canvas.height}clear(){this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.width,this.height)}updateDimensions(){this.isDefault&&(this.width===window.innerWidth&&this.height===window.innerHeight||(this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight))}}class p{constructor(){this.setDefaults()}setDefaults(){this.killed=!1,this.framesSinceDrop=0,this.canvas=null,this.canvasEl=null,this.W=0,this.H=0,this.particleManager=null,this.particlesPerFrame=0,this.wind=0,this.windSpeed=1,this.windSpeedMax=1,this.windChange=.01,this.windPosCoef=.002,this.animationId=null}getParticleOptions(t){const e={canvas:this.canvas,W:this.W,H:this.H,wind:this.wind,windPosCoef:this.windPosCoef,windSpeedMax:this.windSpeedMax,count:0};return Object.assign(e,t),e}createParticles(t={}){const e=this.getParticleOptions(t);this.particleManager=new c(e)}getCanvasElementFromOptions(t){const{canvasId:e,canvasElement:i}=t;let s=i;if(i&&!(i instanceof HTMLCanvasElement))throw new Error("Invalid options: canvasElement is not a valid HTMLCanvasElement");if(e&&i)throw new Error("Invalid options: canvasId and canvasElement are mutually exclusive");if(e&&!s&&(s=document.getElementById(e)),e&&!(s instanceof HTMLCanvasElement))throw new Error(`Invalid options: element with id "${e}" is not a valid HTMLCanvasElement`);return s}start(t={}){this.remove();const e=this.getCanvasElementFromOptions(t);this.canvas=new d(e),this.canvasEl=e,this.createParticles(t),this.setGlobalOptions(t),this.animationId=requestAnimationFrame(this.mainLoop.bind(this))}setGlobalOptions(t){this.particlesPerFrame=t.particlesPerFrame||2,this.windSpeedMax=t.windSpeedMax||1}stop(){this.killed=!0,this.particlesPerFrame=0}update(t){const e=this.getCanvasElementFromOptions(t);this.canvas&&e!==this.canvasEl?this.start(t):(this.setGlobalOptions(t),this.particleManager&&(this.particleManager.particleOptions=this.getParticleOptions(t),this.particleManager.refresh()))}remove(){this.stop(),this.animationId&&cancelAnimationFrame(this.animationId),this.canvas&&this.canvas.clear(),this.setDefaults()}mainLoop(t){this.canvas.updateDimensions(),this.canvas.clear(),this.windSpeed=Math.sin(t/8e3)*this.windSpeedMax,this.wind=this.particleManager.particleOptions.wind+=this.windChange;let e=this.framesSinceDrop*this.particlesPerFrame;for(;e>=1;)this.particleManager.add(),e-=1,this.framesSinceDrop=0;this.particleManager.update(),this.particleManager.draw(),this.killed&&!this.particleManager.items.length||(this.animationId=requestAnimationFrame(this.mainLoop.bind(this))),this.framesSinceDrop+=1}}t("default",e({setup:()=>({confetti:i(new p)}),mounted(){this.confetti.start({defaultType:"heart",defaultSize:20,defaultColors:["DodgerBlue","OliveDrab","Gold","pink","SlateBlue","lightblue","Violet","PaleGreen","SteelBlue","SandyBrown","Chocolate","Crimson"]}),setTimeout((()=>{this.confetti.stop()}),5e3)}})).render=function(t,e,i,s,a,n){return null}}}}));
//# sourceMappingURL=Confetti-legacy.8cf57a34.js.map
